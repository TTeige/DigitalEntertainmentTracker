<% if @result && @full_rec %>
<div class="page-header">
  <h1>
    <%= image_tag(@full_rec.bannerpath_full, :class => "center-block", alt: @full_rec.seriesname) %>
  </h1>
</div>

<div role="tabpanel">
  <ul class="nav nav-tabs" role="tablist">
    <li role="presentation" class="active">
      <a id="calendar_tab" href="#calendar" aria-controls="calendar" role="tab" data-toggle="tab">Calendar</a>
    </li>
    <li role="presentation">
      <a id="actor_tab" href="#actors" aria-controls="actors" role="tab" data-toggle="tab">Actors</a>
    </li>

    <li role="presentation">
      <a id="episode_tab" href="#episodes" aria-controls="episodes" role="tab" data-toggle="tab">Episodes</a>
    </li>
    <li role="presentation">
      <a id="genres_tab" href="#genres" aria-controls="episodes" role="tab" data-toggle="tab">Genres</a>
    </li>
  </ul>

  <div class="tab-content">
    <div role="tabpanel" class="tab-pane fade in active" id="calendar">
      <div class="well">
        <p>Calendar goes here</p>
      </div>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="actors">
      <ul class="list-group">
        <% @result.actors.each do |a| %>
        <li class="list-group-item">
          <div class="media-left">
            <%= image_tag(a.image_path_full, :height => 70, :width => 50) %>
          </div>
          <div class="media-body">
            <h4 class="media-heading"><%= a.name %><h4>
          </div>
        </li>
        <% end %>
      </ul>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="episodes">
      <nav>
        <ul class="pagination">
          <% @num_seasons.times do |i| %>
            <li><a data-toggle="collapse" href="#collapse<%=  + i %>" aria-expanded="true" aria-controls="collapse<%= + i %>"><%= i %></a></li>
          <% end %>
        </ul>
      </nav>
      <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
      <% @seasons.each_with_index do |s, i| %>
        <div class="panel panel-default">
          <div class="panel-heading" role="tab" id="heading<%= + i %>">
            <h4 class="panel-title">
              <a data-toggle="collapse" href="#collapse<%= + i %>" aria-expanded="false" aria-controls="collapse<%= + i %>">
              <% if i == 0 %>
                <h4>Specials</h4>
              <% else %>
                <h4>Season <%= i %></h4>
              <% end %>
              </a>
            </h4>
          </div>
          <div id="collapse<%= + i %>" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading<%= + i %>">
            <div class="list-group" id=<%= i %> >
                <% s.each do |e| %>
                  <li class="list-group-item">
                  <% if e.imagepath_full %>
                    <div class="media-left">
                      <%= image_tag(e.imagepath_full) %>
                    </div>
                  <% end %>
                    <div class="media-body">
                      <h4 class="media-heading"><%= e.episodename %></h4>
                      <p>Episode <%= e.episodenumber %></p>
                      <p><%= e.overview %></p>
                    </div>
                  </li>
              <% end unless s.empty? %>
            </div>
          </div>
        </div>
        <% end %>
      </div>
    </div>
    <div role="tabpanel" class="tab-pane fade" id="genres">
      <ul class="list-group">
      <% @full_rec.genres.each do |genre| %>
        <li class="list-group-item"><%= genre %></li>
      <% end %>
      </ul>
    </div>
  </div>
</div>
<% else %>
<div class="alert alert-danger" role="alert">
  <p>The details for the requested TV show could not be retrieved!</p>
</div>
<% end %>
